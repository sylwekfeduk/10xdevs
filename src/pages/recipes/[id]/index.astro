---
import AppLayout from "../../../layouts/AppLayout.astro";
import { ToasterStandalone } from "../../../components/ui/toaster-standalone";
import { RecipeDetailsPage } from "../../../components/recipe-details/RecipeDetailsPage";

// Check if user is authenticated
if (!Astro.locals.user) {
  // Redirect to login if not authenticated
  return Astro.redirect("/login");
}

// Extract recipe ID from URL parameters
const { id } = Astro.params;

// Validate that ID exists
if (!id) {
  return Astro.redirect("/recipes");
}
---

<AppLayout title="Recipe Details">
  <div class="container mx-auto max-w-4xl px-4 py-8 sm:px-6 lg:px-8">
    <RecipeDetailsPage recipeId={id} client:load />
  </div>
  <ToasterStandalone client:load />
</AppLayout>
